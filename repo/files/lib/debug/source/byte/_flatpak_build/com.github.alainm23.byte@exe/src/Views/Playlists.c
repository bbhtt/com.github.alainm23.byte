/* Playlists.c generated by valac 0.40.11, the Vala compiler
 * generated from Playlists.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gee.h>
#include <glib/gi18n-lib.h>


#define VIEWS_TYPE_PLAYLISTS (views_playlists_get_type ())
#define VIEWS_PLAYLISTS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), VIEWS_TYPE_PLAYLISTS, ViewsPlaylists))
#define VIEWS_PLAYLISTS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), VIEWS_TYPE_PLAYLISTS, ViewsPlaylistsClass))
#define VIEWS_IS_PLAYLISTS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), VIEWS_TYPE_PLAYLISTS))
#define VIEWS_IS_PLAYLISTS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), VIEWS_TYPE_PLAYLISTS))
#define VIEWS_PLAYLISTS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), VIEWS_TYPE_PLAYLISTS, ViewsPlaylistsClass))

typedef struct _ViewsPlaylists ViewsPlaylists;
typedef struct _ViewsPlaylistsClass ViewsPlaylistsClass;
typedef struct _ViewsPlaylistsPrivate ViewsPlaylistsPrivate;

#define OBJECTS_TYPE_PLAYLIST (objects_playlist_get_type ())
#define OBJECTS_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), OBJECTS_TYPE_PLAYLIST, ObjectsPlaylist))
#define OBJECTS_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), OBJECTS_TYPE_PLAYLIST, ObjectsPlaylistClass))
#define OBJECTS_IS_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), OBJECTS_TYPE_PLAYLIST))
#define OBJECTS_IS_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), OBJECTS_TYPE_PLAYLIST))
#define OBJECTS_PLAYLIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), OBJECTS_TYPE_PLAYLIST, ObjectsPlaylistClass))

typedef struct _ObjectsPlaylist ObjectsPlaylist;
typedef struct _ObjectsPlaylistClass ObjectsPlaylistClass;
enum  {
	VIEWS_PLAYLISTS_0_PROPERTY,
	VIEWS_PLAYLISTS_NUM_PROPERTIES
};
static GParamSpec* views_playlists_properties[VIEWS_PLAYLISTS_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define WIDGETS_TYPE_PLAYLIST_ROW (widgets_playlist_row_get_type ())
#define WIDGETS_PLAYLIST_ROW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WIDGETS_TYPE_PLAYLIST_ROW, WidgetsPlaylistRow))
#define WIDGETS_PLAYLIST_ROW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WIDGETS_TYPE_PLAYLIST_ROW, WidgetsPlaylistRowClass))
#define WIDGETS_IS_PLAYLIST_ROW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WIDGETS_TYPE_PLAYLIST_ROW))
#define WIDGETS_IS_PLAYLIST_ROW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WIDGETS_TYPE_PLAYLIST_ROW))
#define WIDGETS_PLAYLIST_ROW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WIDGETS_TYPE_PLAYLIST_ROW, WidgetsPlaylistRowClass))

typedef struct _WidgetsPlaylistRow WidgetsPlaylistRow;
typedef struct _WidgetsPlaylistRowClass WidgetsPlaylistRowClass;

#define WIDGETS_POPOVERS_TYPE_NEW_PLAYLIST (widgets_popovers_new_playlist_get_type ())
#define WIDGETS_POPOVERS_NEW_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WIDGETS_POPOVERS_TYPE_NEW_PLAYLIST, WidgetsPopoversNewPlaylist))
#define WIDGETS_POPOVERS_NEW_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WIDGETS_POPOVERS_TYPE_NEW_PLAYLIST, WidgetsPopoversNewPlaylistClass))
#define WIDGETS_POPOVERS_IS_NEW_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WIDGETS_POPOVERS_TYPE_NEW_PLAYLIST))
#define WIDGETS_POPOVERS_IS_NEW_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WIDGETS_POPOVERS_TYPE_NEW_PLAYLIST))
#define WIDGETS_POPOVERS_NEW_PLAYLIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WIDGETS_POPOVERS_TYPE_NEW_PLAYLIST, WidgetsPopoversNewPlaylistClass))

typedef struct _WidgetsPopoversNewPlaylist WidgetsPopoversNewPlaylist;
typedef struct _WidgetsPopoversNewPlaylistClass WidgetsPopoversNewPlaylistClass;
typedef struct _Block57Data Block57Data;

#define SERVICES_TYPE_DATABASE (services_database_get_type ())
#define SERVICES_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SERVICES_TYPE_DATABASE, ServicesDatabase))
#define SERVICES_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SERVICES_TYPE_DATABASE, ServicesDatabaseClass))
#define SERVICES_IS_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SERVICES_TYPE_DATABASE))
#define SERVICES_IS_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SERVICES_TYPE_DATABASE))
#define SERVICES_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SERVICES_TYPE_DATABASE, ServicesDatabaseClass))

typedef struct _ServicesDatabase ServicesDatabase;
typedef struct _ServicesDatabaseClass ServicesDatabaseClass;
typedef struct _WidgetsPopoversNewPlaylistPrivate WidgetsPopoversNewPlaylistPrivate;
typedef struct _Block58Data Block58Data;
typedef struct _Block59Data Block59Data;

#define SERVICES_TYPE_SCAN (services_scan_get_type ())
#define SERVICES_SCAN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SERVICES_TYPE_SCAN, ServicesScan))
#define SERVICES_SCAN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SERVICES_TYPE_SCAN, ServicesScanClass))
#define SERVICES_IS_SCAN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SERVICES_TYPE_SCAN))
#define SERVICES_IS_SCAN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SERVICES_TYPE_SCAN))
#define SERVICES_SCAN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SERVICES_TYPE_SCAN, ServicesScanClass))

typedef struct _ServicesScan ServicesScan;
typedef struct _ServicesScanClass ServicesScanClass;
enum  {
	VIEWS_PLAYLISTS_GO_BACK_SIGNAL,
	VIEWS_PLAYLISTS_GO_PLAYLIST_SIGNAL,
	VIEWS_PLAYLISTS_NUM_SIGNALS
};
static guint views_playlists_signals[VIEWS_PLAYLISTS_NUM_SIGNALS] = {0};

struct _ViewsPlaylists {
	GtkEventBox parent_instance;
	ViewsPlaylistsPrivate * priv;
};

struct _ViewsPlaylistsClass {
	GtkEventBoxClass parent_class;
};

struct _ViewsPlaylistsPrivate {
	GtkListBox* listbox;
	gint item_index;
	gint item_max;
	GeeArrayList* all_items;
};

struct _Block57Data {
	int _ref_count_;
	ViewsPlaylists* self;
	GtkToggleButton* add_button;
	WidgetsPopoversNewPlaylist* add_popover;
};

struct _WidgetsPopoversNewPlaylist {
	GtkPopover parent_instance;
	WidgetsPopoversNewPlaylistPrivate * priv;
	GtkEntry* title_entry;
};

struct _WidgetsPopoversNewPlaylistClass {
	GtkPopoverClass parent_class;
};

struct _Block58Data {
	int _ref_count_;
	ViewsPlaylists* self;
	ObjectsPlaylist* playlist;
};

struct _Block59Data {
	int _ref_count_;
	ViewsPlaylists* self;
	GtkWidget* widget;
};


static gpointer views_playlists_parent_class = NULL;
extern ServicesDatabase* byte_database;
extern ServicesScan* byte_scan_service;

GType views_playlists_get_type (void) G_GNUC_CONST;
GType objects_playlist_get_type (void) G_GNUC_CONST;
#define VIEWS_PLAYLISTS_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), VIEWS_TYPE_PLAYLISTS, ViewsPlaylistsPrivate))
ViewsPlaylists* views_playlists_new (void);
ViewsPlaylists* views_playlists_construct (GType object_type);
static void views_playlists_add_item (ViewsPlaylists* self,
                               ObjectsPlaylist* playlist);
GType widgets_playlist_row_get_type (void) G_GNUC_CONST;
WidgetsPlaylistRow* widgets_playlist_row_new (ObjectsPlaylist* playlist);
WidgetsPlaylistRow* widgets_playlist_row_construct (GType object_type,
                                                    ObjectsPlaylist* playlist);
void views_playlists_add_all_items (ViewsPlaylists* self);
static GObject * views_playlists_constructor (GType type,
                                       guint n_construct_properties,
                                       GObjectConstructParam * construct_properties);
GType widgets_popovers_new_playlist_get_type (void) G_GNUC_CONST;
static Block57Data* block57_data_ref (Block57Data* _data57_);
static void block57_data_unref (void * _userdata_);
GType services_database_get_type (void) G_GNUC_CONST;
GeeArrayList* services_database_get_all_playlists (ServicesDatabase* self);
WidgetsPopoversNewPlaylist* widgets_popovers_new_playlist_new (GtkWidget* relative);
WidgetsPopoversNewPlaylist* widgets_popovers_new_playlist_construct (GType object_type,
                                                                     GtkWidget* relative);
static void _views_playlists___lambda199_ (ViewsPlaylists* self);
static void __views_playlists___lambda199__gtk_button_clicked (GtkButton* _sender,
                                                        gpointer self);
static void _views_playlists___lambda200_ (Block57Data* _data57_);
static void __views_playlists___lambda200__gtk_toggle_button_toggled (GtkToggleButton* _sender,
                                                               gpointer self);
static void _views_playlists___lambda201_ (Block57Data* _data57_);
static void __views_playlists___lambda201__gtk_popover_closed (GtkPopover* _sender,
                                                        gpointer self);
static void _views_playlists___lambda202_ (ViewsPlaylists* self,
                                    GtkListBoxRow* row);
ObjectsPlaylist* widgets_playlist_row_get_playlist (WidgetsPlaylistRow* self);
static void __views_playlists___lambda202__gtk_list_box_row_activated (GtkListBox* _sender,
                                                                GtkListBoxRow* row,
                                                                gpointer self);
static void _views_playlists___lambda203_ (ViewsPlaylists* self,
                                    ObjectsPlaylist* playlist);
static Block58Data* block58_data_ref (Block58Data* _data58_);
static void block58_data_unref (void * _userdata_);
static gboolean __lambda204_ (Block58Data* _data58_);
static gboolean ___lambda204__gsource_func (gpointer self);
static void __views_playlists___lambda203__services_database_adden_new_playlist (ServicesDatabase* _sender,
                                                                          ObjectsPlaylist* playlist,
                                                                          gpointer self);
static void _views_playlists___lambda205_ (ViewsPlaylists* self,
                                    GtkPositionType pos);
static void __views_playlists___lambda205__gtk_scrolled_window_edge_reached (GtkScrolledWindow* _sender,
                                                                      GtkPositionType pos,
                                                                      gpointer self);
static void _views_playlists___lambda206_ (ViewsPlaylists* self);
static void __lambda207_ (ViewsPlaylists* self,
                   GtkWidget* widget);
static Block59Data* block59_data_ref (Block59Data* _data59_);
static void block59_data_unref (void * _userdata_);
static gboolean __lambda208_ (Block59Data* _data59_);
static gboolean ___lambda208__gsource_func (gpointer self);
static void ___lambda207__gtk_callback (GtkWidget* widget,
                                 gpointer self);
static void __views_playlists___lambda206__services_database_reset_library (ServicesDatabase* _sender,
                                                                     gpointer self);
GType services_scan_get_type (void) G_GNUC_CONST;
static void _views_playlists___lambda209_ (Block57Data* _data57_);
static void __views_playlists___lambda209__services_scan_sync_started (ServicesScan* _sender,
                                                                gpointer self);
static void _views_playlists___lambda210_ (Block57Data* _data57_);
static void __views_playlists___lambda210__services_scan_sync_finished (ServicesScan* _sender,
                                                                 gpointer self);
static void views_playlists_finalize (GObject * obj);


ViewsPlaylists*
views_playlists_construct (GType object_type)
{
	ViewsPlaylists * self = NULL;
	self = (ViewsPlaylists*) g_object_new (object_type, NULL);
	return self;
}


ViewsPlaylists*
views_playlists_new (void)
{
	return views_playlists_construct (VIEWS_TYPE_PLAYLISTS);
}


static void
views_playlists_add_item (ViewsPlaylists* self,
                          ObjectsPlaylist* playlist)
{
	WidgetsPlaylistRow* row = NULL;
	WidgetsPlaylistRow* _tmp0_;
	GeeArrayList* _tmp1_;
	GtkListBox* _tmp2_;
	GtkListBox* _tmp3_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (playlist != NULL);
	_tmp0_ = widgets_playlist_row_new (playlist);
	g_object_ref_sink (_tmp0_);
	row = _tmp0_;
	_tmp1_ = self->priv->all_items;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp1_, playlist);
	_tmp2_ = self->priv->listbox;
	gtk_container_add ((GtkContainer*) _tmp2_, (GtkWidget*) row);
	_tmp3_ = self->priv->listbox;
	gtk_widget_show_all ((GtkWidget*) _tmp3_);
	_g_object_unref0 (row);
}


void
views_playlists_add_all_items (ViewsPlaylists* self)
{
	gint _tmp0_;
	GeeArrayList* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->item_max;
	_tmp1_ = self->priv->all_items;
	_tmp2_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp1_);
	_tmp3_ = _tmp2_;
	if (_tmp0_ > _tmp3_) {
		GeeArrayList* _tmp4_;
		gint _tmp5_;
		gint _tmp6_;
		_tmp4_ = self->priv->all_items;
		_tmp5_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		self->priv->item_max = _tmp6_;
	}
	{
		gint i = 0;
		gint _tmp7_;
		_tmp7_ = self->priv->item_index;
		i = _tmp7_;
		{
			gboolean _tmp8_ = FALSE;
			_tmp8_ = TRUE;
			while (TRUE) {
				gint _tmp10_;
				gint _tmp11_;
				WidgetsPlaylistRow* row = NULL;
				GeeArrayList* _tmp12_;
				gint _tmp13_;
				gpointer _tmp14_;
				ObjectsPlaylist* _tmp15_;
				WidgetsPlaylistRow* _tmp16_;
				WidgetsPlaylistRow* _tmp17_;
				GtkListBox* _tmp18_;
				WidgetsPlaylistRow* _tmp19_;
				GtkListBox* _tmp20_;
				if (!_tmp8_) {
					gint _tmp9_;
					_tmp9_ = i;
					i = _tmp9_ + 1;
				}
				_tmp8_ = FALSE;
				_tmp10_ = i;
				_tmp11_ = self->priv->item_max;
				if (!(_tmp10_ < _tmp11_)) {
					break;
				}
				_tmp12_ = self->priv->all_items;
				_tmp13_ = i;
				_tmp14_ = gee_abstract_list_get ((GeeAbstractList*) _tmp12_, _tmp13_);
				_tmp15_ = (ObjectsPlaylist*) _tmp14_;
				_tmp16_ = widgets_playlist_row_new (_tmp15_);
				g_object_ref_sink (_tmp16_);
				_tmp17_ = _tmp16_;
				_g_object_unref0 (_tmp15_);
				row = _tmp17_;
				_tmp18_ = self->priv->listbox;
				_tmp19_ = row;
				gtk_container_add ((GtkContainer*) _tmp18_, (GtkWidget*) _tmp19_);
				_tmp20_ = self->priv->listbox;
				gtk_widget_show_all ((GtkWidget*) _tmp20_);
				_g_object_unref0 (row);
			}
		}
	}
}


static Block57Data*
block57_data_ref (Block57Data* _data57_)
{
	g_atomic_int_inc (&_data57_->_ref_count_);
	return _data57_;
}


static void
block57_data_unref (void * _userdata_)
{
	Block57Data* _data57_;
	_data57_ = (Block57Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data57_->_ref_count_)) {
		ViewsPlaylists* self;
		self = _data57_->self;
		_g_object_unref0 (_data57_->add_popover);
		_g_object_unref0 (_data57_->add_button);
		_g_object_unref0 (self);
		g_slice_free (Block57Data, _data57_);
	}
}


static void
_views_playlists___lambda199_ (ViewsPlaylists* self)
{
	g_signal_emit (self, views_playlists_signals[VIEWS_PLAYLISTS_GO_BACK_SIGNAL], 0);
}


static void
__views_playlists___lambda199__gtk_button_clicked (GtkButton* _sender,
                                                   gpointer self)
{
	_views_playlists___lambda199_ ((ViewsPlaylists*) self);
}


static void
_views_playlists___lambda200_ (Block57Data* _data57_)
{
	ViewsPlaylists* self;
	GtkToggleButton* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	self = _data57_->self;
	_tmp0_ = _data57_->add_button;
	_tmp1_ = gtk_toggle_button_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		WidgetsPopoversNewPlaylist* _tmp3_;
		WidgetsPopoversNewPlaylist* _tmp4_;
		GtkEntry* _tmp5_;
		_tmp3_ = _data57_->add_popover;
		gtk_widget_show_all ((GtkWidget*) _tmp3_);
		_tmp4_ = _data57_->add_popover;
		_tmp5_ = _tmp4_->title_entry;
		gtk_widget_grab_focus ((GtkWidget*) _tmp5_);
	}
}


static void
__views_playlists___lambda200__gtk_toggle_button_toggled (GtkToggleButton* _sender,
                                                          gpointer self)
{
	_views_playlists___lambda200_ (self);
}


static void
_views_playlists___lambda201_ (Block57Data* _data57_)
{
	ViewsPlaylists* self;
	GtkToggleButton* _tmp0_;
	self = _data57_->self;
	_tmp0_ = _data57_->add_button;
	gtk_toggle_button_set_active (_tmp0_, FALSE);
}


static void
__views_playlists___lambda201__gtk_popover_closed (GtkPopover* _sender,
                                                   gpointer self)
{
	_views_playlists___lambda201_ (self);
}


static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}


static void
_views_playlists___lambda202_ (ViewsPlaylists* self,
                               GtkListBoxRow* row)
{
	WidgetsPlaylistRow* item = NULL;
	WidgetsPlaylistRow* _tmp0_;
	WidgetsPlaylistRow* _tmp1_;
	ObjectsPlaylist* _tmp2_;
	ObjectsPlaylist* _tmp3_;
	g_return_if_fail (row != NULL);
	_tmp0_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (row, WIDGETS_TYPE_PLAYLIST_ROW) ? ((WidgetsPlaylistRow*) row) : NULL);
	item = _tmp0_;
	_tmp1_ = item;
	_tmp2_ = widgets_playlist_row_get_playlist (_tmp1_);
	_tmp3_ = _tmp2_;
	g_signal_emit (self, views_playlists_signals[VIEWS_PLAYLISTS_GO_PLAYLIST_SIGNAL], 0, _tmp3_);
	_g_object_unref0 (item);
}


static void
__views_playlists___lambda202__gtk_list_box_row_activated (GtkListBox* _sender,
                                                           GtkListBoxRow* row,
                                                           gpointer self)
{
	_views_playlists___lambda202_ ((ViewsPlaylists*) self, row);
}


static Block58Data*
block58_data_ref (Block58Data* _data58_)
{
	g_atomic_int_inc (&_data58_->_ref_count_);
	return _data58_;
}


static void
block58_data_unref (void * _userdata_)
{
	Block58Data* _data58_;
	_data58_ = (Block58Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data58_->_ref_count_)) {
		ViewsPlaylists* self;
		self = _data58_->self;
		_g_object_unref0 (_data58_->playlist);
		_g_object_unref0 (self);
		g_slice_free (Block58Data, _data58_);
	}
}


static gboolean
__lambda204_ (Block58Data* _data58_)
{
	ViewsPlaylists* self;
	gboolean result = FALSE;
	self = _data58_->self;
	views_playlists_add_item (self, _data58_->playlist);
	result = FALSE;
	return result;
}


static gboolean
___lambda204__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda204_ (self);
	return result;
}


static void
_views_playlists___lambda203_ (ViewsPlaylists* self,
                               ObjectsPlaylist* playlist)
{
	Block58Data* _data58_;
	ObjectsPlaylist* _tmp0_;
	g_return_if_fail (playlist != NULL);
	_data58_ = g_slice_new0 (Block58Data);
	_data58_->_ref_count_ = 1;
	_data58_->self = g_object_ref (self);
	_tmp0_ = _g_object_ref0 (playlist);
	_g_object_unref0 (_data58_->playlist);
	_data58_->playlist = _tmp0_;
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda204__gsource_func, block58_data_ref (_data58_), block58_data_unref);
	block58_data_unref (_data58_);
	_data58_ = NULL;
}


static void
__views_playlists___lambda203__services_database_adden_new_playlist (ServicesDatabase* _sender,
                                                                     ObjectsPlaylist* playlist,
                                                                     gpointer self)
{
	_views_playlists___lambda203_ ((ViewsPlaylists*) self, playlist);
}


static void
_views_playlists___lambda205_ (ViewsPlaylists* self,
                               GtkPositionType pos)
{
	if (pos == GTK_POS_BOTTOM) {
		gint _tmp0_;
		gint _tmp1_;
		gint _tmp2_;
		GeeArrayList* _tmp3_;
		gint _tmp4_;
		gint _tmp5_;
		_tmp0_ = self->priv->item_max;
		self->priv->item_index = _tmp0_;
		_tmp1_ = self->priv->item_max;
		self->priv->item_max = _tmp1_ + 100;
		_tmp2_ = self->priv->item_max;
		_tmp3_ = self->priv->all_items;
		_tmp4_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp3_);
		_tmp5_ = _tmp4_;
		if (_tmp2_ > _tmp5_) {
			GeeArrayList* _tmp6_;
			gint _tmp7_;
			gint _tmp8_;
			_tmp6_ = self->priv->all_items;
			_tmp7_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp6_);
			_tmp8_ = _tmp7_;
			self->priv->item_max = _tmp8_;
		}
	}
}


static void
__views_playlists___lambda205__gtk_scrolled_window_edge_reached (GtkScrolledWindow* _sender,
                                                                 GtkPositionType pos,
                                                                 gpointer self)
{
	_views_playlists___lambda205_ ((ViewsPlaylists*) self, pos);
}


static Block59Data*
block59_data_ref (Block59Data* _data59_)
{
	g_atomic_int_inc (&_data59_->_ref_count_);
	return _data59_;
}


static void
block59_data_unref (void * _userdata_)
{
	Block59Data* _data59_;
	_data59_ = (Block59Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data59_->_ref_count_)) {
		ViewsPlaylists* self;
		self = _data59_->self;
		_g_object_unref0 (_data59_->widget);
		_g_object_unref0 (self);
		g_slice_free (Block59Data, _data59_);
	}
}


static gboolean
__lambda208_ (Block59Data* _data59_)
{
	ViewsPlaylists* self;
	gboolean result = FALSE;
	self = _data59_->self;
	gtk_widget_destroy (_data59_->widget);
	result = FALSE;
	return result;
}


static gboolean
___lambda208__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda208_ (self);
	return result;
}


static void
__lambda207_ (ViewsPlaylists* self,
              GtkWidget* widget)
{
	Block59Data* _data59_;
	GtkWidget* _tmp0_;
	g_return_if_fail (widget != NULL);
	_data59_ = g_slice_new0 (Block59Data);
	_data59_->_ref_count_ = 1;
	_data59_->self = g_object_ref (self);
	_tmp0_ = _g_object_ref0 (widget);
	_g_object_unref0 (_data59_->widget);
	_data59_->widget = _tmp0_;
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda208__gsource_func, block59_data_ref (_data59_), block59_data_unref);
	block59_data_unref (_data59_);
	_data59_ = NULL;
}


static void
___lambda207__gtk_callback (GtkWidget* widget,
                            gpointer self)
{
	__lambda207_ ((ViewsPlaylists*) self, widget);
}


static void
_views_playlists___lambda206_ (ViewsPlaylists* self)
{
	GtkListBox* _tmp0_;
	_tmp0_ = self->priv->listbox;
	gtk_container_foreach ((GtkContainer*) _tmp0_, ___lambda207__gtk_callback, self);
}


static void
__views_playlists___lambda206__services_database_reset_library (ServicesDatabase* _sender,
                                                                gpointer self)
{
	_views_playlists___lambda206_ ((ViewsPlaylists*) self);
}


static void
_views_playlists___lambda209_ (Block57Data* _data57_)
{
	ViewsPlaylists* self;
	GtkToggleButton* _tmp0_;
	self = _data57_->self;
	_tmp0_ = _data57_->add_button;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp0_, FALSE);
}


static void
__views_playlists___lambda209__services_scan_sync_started (ServicesScan* _sender,
                                                           gpointer self)
{
	_views_playlists___lambda209_ (self);
}


static void
_views_playlists___lambda210_ (Block57Data* _data57_)
{
	ViewsPlaylists* self;
	GtkToggleButton* _tmp0_;
	self = _data57_->self;
	_tmp0_ = _data57_->add_button;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp0_, TRUE);
}


static void
__views_playlists___lambda210__services_scan_sync_finished (ServicesScan* _sender,
                                                            gpointer self)
{
	_views_playlists___lambda210_ (self);
}


static GObject *
views_playlists_constructor (GType type,
                             guint n_construct_properties,
                             GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	ViewsPlaylists * self;
	Block57Data* _data57_;
	ServicesDatabase* _tmp0_;
	GeeArrayList* _tmp1_;
	GtkStyleContext* _tmp2_;
	GtkStyleContext* _tmp3_;
	GtkButton* back_button = NULL;
	GtkButton* _tmp4_;
	GtkButton* _tmp5_;
	GtkButton* _tmp6_;
	GtkButton* _tmp7_;
	GtkButton* _tmp8_;
	GtkButton* _tmp9_;
	GtkStyleContext* _tmp10_;
	GtkButton* _tmp11_;
	GtkStyleContext* _tmp12_;
	GtkLabel* title_label = NULL;
	GtkLabel* _tmp13_;
	GtkLabel* _tmp14_;
	GtkLabel* _tmp15_;
	GtkLabel* _tmp16_;
	GtkStyleContext* _tmp17_;
	GtkLabel* _tmp18_;
	GtkStyleContext* _tmp19_;
	GtkToggleButton* _tmp20_;
	GtkToggleButton* _tmp21_;
	GtkToggleButton* _tmp22_;
	GtkToggleButton* _tmp23_;
	GtkToggleButton* _tmp24_;
	GtkToggleButton* _tmp25_;
	GtkStyleContext* _tmp26_;
	GtkToggleButton* _tmp27_;
	GtkStyleContext* _tmp28_;
	GtkToggleButton* _tmp29_;
	GtkToggleButton* _tmp30_;
	GtkImage* _tmp31_;
	GtkImage* _tmp32_;
	GtkToggleButton* _tmp33_;
	WidgetsPopoversNewPlaylist* _tmp34_;
	GtkBox* header_box = NULL;
	GtkBox* _tmp35_;
	GtkBox* _tmp36_;
	GtkStyleContext* _tmp37_;
	GtkBox* _tmp38_;
	GtkButton* _tmp39_;
	GtkBox* _tmp40_;
	GtkLabel* _tmp41_;
	GtkBox* _tmp42_;
	GtkToggleButton* _tmp43_;
	GtkListBox* _tmp44_;
	GtkListBox* _tmp45_;
	GtkScrolledWindow* scrolled = NULL;
	GtkScrolledWindow* _tmp46_;
	GtkScrolledWindow* _tmp47_;
	GtkScrolledWindow* _tmp48_;
	GtkScrolledWindow* _tmp49_;
	GtkScrolledWindow* _tmp50_;
	GtkListBox* _tmp51_;
	GtkBox* main_box = NULL;
	GtkBox* _tmp52_;
	GtkBox* _tmp53_;
	GtkBox* _tmp54_;
	GtkBox* _tmp55_;
	GtkBox* _tmp56_;
	GtkBox* _tmp57_;
	GtkSeparator* _tmp58_;
	GtkSeparator* _tmp59_;
	GtkBox* _tmp60_;
	GtkScrolledWindow* _tmp61_;
	GtkBox* _tmp62_;
	GtkButton* _tmp63_;
	GtkToggleButton* _tmp64_;
	WidgetsPopoversNewPlaylist* _tmp65_;
	GtkListBox* _tmp66_;
	ServicesDatabase* _tmp67_;
	GtkScrolledWindow* _tmp68_;
	ServicesDatabase* _tmp69_;
	ServicesScan* _tmp70_;
	ServicesScan* _tmp71_;
	parent_class = G_OBJECT_CLASS (views_playlists_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, VIEWS_TYPE_PLAYLISTS, ViewsPlaylists);
	_data57_ = g_slice_new0 (Block57Data);
	_data57_->_ref_count_ = 1;
	_data57_->self = g_object_ref (self);
	self->priv->item_index = 0;
	self->priv->item_max = 25;
	_tmp0_ = byte_database;
	_tmp1_ = services_database_get_all_playlists (_tmp0_);
	_g_object_unref0 (self->priv->all_items);
	self->priv->all_items = _tmp1_;
	_tmp2_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp2_, GTK_STYLE_CLASS_VIEW);
	_tmp3_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp3_, "w-round");
	_tmp4_ = (GtkButton*) gtk_button_new_from_icon_name ("byte-arrow-back-symbolic", (GtkIconSize) GTK_ICON_SIZE_MENU);
	g_object_ref_sink (_tmp4_);
	back_button = _tmp4_;
	_tmp5_ = back_button;
	gtk_widget_set_can_focus ((GtkWidget*) _tmp5_, FALSE);
	_tmp6_ = back_button;
	g_object_set ((GtkWidget*) _tmp6_, "margin", 3, NULL);
	_tmp7_ = back_button;
	gtk_widget_set_margin_bottom ((GtkWidget*) _tmp7_, 6);
	_tmp8_ = back_button;
	gtk_widget_set_margin_top ((GtkWidget*) _tmp8_, 6);
	_tmp9_ = back_button;
	_tmp10_ = gtk_widget_get_style_context ((GtkWidget*) _tmp9_);
	gtk_style_context_add_class (_tmp10_, GTK_STYLE_CLASS_FLAT);
	_tmp11_ = back_button;
	_tmp12_ = gtk_widget_get_style_context ((GtkWidget*) _tmp11_);
	gtk_style_context_add_class (_tmp12_, "label-color-primary");
	_tmp13_ = (GtkLabel*) gtk_label_new (_ ("Playlists"));
	g_object_ref_sink (_tmp13_);
	title_label = _tmp13_;
	_tmp14_ = title_label;
	gtk_label_set_use_markup (_tmp14_, TRUE);
	_tmp15_ = title_label;
	gtk_widget_set_valign ((GtkWidget*) _tmp15_, GTK_ALIGN_CENTER);
	_tmp16_ = title_label;
	_tmp17_ = gtk_widget_get_style_context ((GtkWidget*) _tmp16_);
	gtk_style_context_add_class (_tmp17_, "h3");
	_tmp18_ = title_label;
	_tmp19_ = gtk_widget_get_style_context ((GtkWidget*) _tmp18_);
	gtk_style_context_add_class (_tmp19_, "label-color-primary");
	_tmp20_ = (GtkToggleButton*) gtk_toggle_button_new ();
	g_object_ref_sink (_tmp20_);
	_data57_->add_button = _tmp20_;
	_tmp21_ = _data57_->add_button;
	gtk_widget_set_can_focus ((GtkWidget*) _tmp21_, FALSE);
	_tmp22_ = _data57_->add_button;
	gtk_widget_set_valign ((GtkWidget*) _tmp22_, GTK_ALIGN_CENTER);
	_tmp23_ = _data57_->add_button;
	gtk_widget_set_halign ((GtkWidget*) _tmp23_, GTK_ALIGN_CENTER);
	_tmp24_ = _data57_->add_button;
	g_object_set ((GtkWidget*) _tmp24_, "margin", 3, NULL);
	_tmp25_ = _data57_->add_button;
	_tmp26_ = gtk_widget_get_style_context ((GtkWidget*) _tmp25_);
	gtk_style_context_add_class (_tmp26_, GTK_STYLE_CLASS_FLAT);
	_tmp27_ = _data57_->add_button;
	_tmp28_ = gtk_widget_get_style_context ((GtkWidget*) _tmp27_);
	gtk_style_context_add_class (_tmp28_, "label-color-primary");
	_tmp29_ = _data57_->add_button;
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp29_, _ ("Add New Playlist"));
	_tmp30_ = _data57_->add_button;
	_tmp31_ = (GtkImage*) gtk_image_new_from_icon_name ("list-add-symbolic", (GtkIconSize) GTK_ICON_SIZE_SMALL_TOOLBAR);
	g_object_ref_sink (_tmp31_);
	_tmp32_ = _tmp31_;
	gtk_container_add ((GtkContainer*) _tmp30_, (GtkWidget*) _tmp32_);
	_g_object_unref0 (_tmp32_);
	_tmp33_ = _data57_->add_button;
	_tmp34_ = widgets_popovers_new_playlist_new ((GtkWidget*) _tmp33_);
	g_object_ref_sink (_tmp34_);
	_data57_->add_popover = _tmp34_;
	_tmp35_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 0);
	g_object_ref_sink (_tmp35_);
	header_box = _tmp35_;
	_tmp36_ = header_box;
	_tmp37_ = gtk_widget_get_style_context ((GtkWidget*) _tmp36_);
	gtk_style_context_add_class (_tmp37_, GTK_STYLE_CLASS_BACKGROUND);
	_tmp38_ = header_box;
	_tmp39_ = back_button;
	gtk_box_pack_start (_tmp38_, (GtkWidget*) _tmp39_, FALSE, FALSE, (guint) 0);
	_tmp40_ = header_box;
	_tmp41_ = title_label;
	gtk_box_set_center_widget (_tmp40_, (GtkWidget*) _tmp41_);
	_tmp42_ = header_box;
	_tmp43_ = _data57_->add_button;
	gtk_box_pack_end (_tmp42_, (GtkWidget*) _tmp43_, FALSE, FALSE, (guint) 0);
	_tmp44_ = (GtkListBox*) gtk_list_box_new ();
	g_object_ref_sink (_tmp44_);
	_g_object_unref0 (self->priv->listbox);
	self->priv->listbox = _tmp44_;
	_tmp45_ = self->priv->listbox;
	g_object_set ((GtkWidget*) _tmp45_, "expand", TRUE, NULL);
	_tmp46_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp46_);
	scrolled = _tmp46_;
	_tmp47_ = scrolled;
	gtk_widget_set_margin_top ((GtkWidget*) _tmp47_, 3);
	_tmp48_ = scrolled;
	g_object_set (_tmp48_, "hscrollbar-policy", GTK_POLICY_NEVER, NULL);
	_tmp49_ = scrolled;
	g_object_set ((GtkWidget*) _tmp49_, "expand", TRUE, NULL);
	_tmp50_ = scrolled;
	_tmp51_ = self->priv->listbox;
	gtk_container_add ((GtkContainer*) _tmp50_, (GtkWidget*) _tmp51_);
	_tmp52_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp52_);
	main_box = _tmp52_;
	_tmp53_ = main_box;
	gtk_widget_set_margin_bottom ((GtkWidget*) _tmp53_, 3);
	_tmp54_ = main_box;
	g_object_set ((GtkWidget*) _tmp54_, "expand", TRUE, NULL);
	_tmp55_ = main_box;
	_tmp56_ = header_box;
	gtk_box_pack_start (_tmp55_, (GtkWidget*) _tmp56_, FALSE, FALSE, (guint) 0);
	_tmp57_ = main_box;
	_tmp58_ = (GtkSeparator*) gtk_separator_new (GTK_ORIENTATION_HORIZONTAL);
	g_object_ref_sink (_tmp58_);
	_tmp59_ = _tmp58_;
	gtk_box_pack_start (_tmp57_, (GtkWidget*) _tmp59_, FALSE, FALSE, (guint) 0);
	_g_object_unref0 (_tmp59_);
	_tmp60_ = main_box;
	_tmp61_ = scrolled;
	gtk_box_pack_start (_tmp60_, (GtkWidget*) _tmp61_, TRUE, TRUE, (guint) 0);
	_tmp62_ = main_box;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp62_);
	views_playlists_add_all_items (self);
	_tmp63_ = back_button;
	g_signal_connect_object (_tmp63_, "clicked", (GCallback) __views_playlists___lambda199__gtk_button_clicked, self, 0);
	_tmp64_ = _data57_->add_button;
	g_signal_connect_data (_tmp64_, "toggled", (GCallback) __views_playlists___lambda200__gtk_toggle_button_toggled, block57_data_ref (_data57_), (GClosureNotify) block57_data_unref, 0);
	_tmp65_ = _data57_->add_popover;
	g_signal_connect_data ((GtkPopover*) _tmp65_, "closed", (GCallback) __views_playlists___lambda201__gtk_popover_closed, block57_data_ref (_data57_), (GClosureNotify) block57_data_unref, 0);
	_tmp66_ = self->priv->listbox;
	g_signal_connect_object (_tmp66_, "row-activated", (GCallback) __views_playlists___lambda202__gtk_list_box_row_activated, self, 0);
	_tmp67_ = byte_database;
	g_signal_connect_object (_tmp67_, "adden-new-playlist", (GCallback) __views_playlists___lambda203__services_database_adden_new_playlist, self, 0);
	_tmp68_ = scrolled;
	g_signal_connect_object (_tmp68_, "edge-reached", (GCallback) __views_playlists___lambda205__gtk_scrolled_window_edge_reached, self, 0);
	_tmp69_ = byte_database;
	g_signal_connect_object (_tmp69_, "reset-library", (GCallback) __views_playlists___lambda206__services_database_reset_library, self, 0);
	_tmp70_ = byte_scan_service;
	g_signal_connect_data (_tmp70_, "sync-started", (GCallback) __views_playlists___lambda209__services_scan_sync_started, block57_data_ref (_data57_), (GClosureNotify) block57_data_unref, 0);
	_tmp71_ = byte_scan_service;
	g_signal_connect_data (_tmp71_, "sync-finished", (GCallback) __views_playlists___lambda210__services_scan_sync_finished, block57_data_ref (_data57_), (GClosureNotify) block57_data_unref, 0);
	_g_object_unref0 (main_box);
	_g_object_unref0 (scrolled);
	_g_object_unref0 (header_box);
	_g_object_unref0 (title_label);
	_g_object_unref0 (back_button);
	block57_data_unref (_data57_);
	_data57_ = NULL;
	return obj;
}


static void
views_playlists_class_init (ViewsPlaylistsClass * klass)
{
	views_playlists_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (ViewsPlaylistsPrivate));
	G_OBJECT_CLASS (klass)->constructor = views_playlists_constructor;
	G_OBJECT_CLASS (klass)->finalize = views_playlists_finalize;
	views_playlists_signals[VIEWS_PLAYLISTS_GO_BACK_SIGNAL] = g_signal_new ("go-back", VIEWS_TYPE_PLAYLISTS, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	views_playlists_signals[VIEWS_PLAYLISTS_GO_PLAYLIST_SIGNAL] = g_signal_new ("go-playlist", VIEWS_TYPE_PLAYLISTS, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__OBJECT, G_TYPE_NONE, 1, OBJECTS_TYPE_PLAYLIST);
}


static void
views_playlists_instance_init (ViewsPlaylists * self)
{
	self->priv = VIEWS_PLAYLISTS_GET_PRIVATE (self);
}


static void
views_playlists_finalize (GObject * obj)
{
	ViewsPlaylists * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, VIEWS_TYPE_PLAYLISTS, ViewsPlaylists);
	_g_object_unref0 (self->priv->listbox);
	_g_object_unref0 (self->priv->all_items);
	G_OBJECT_CLASS (views_playlists_parent_class)->finalize (obj);
}


GType
views_playlists_get_type (void)
{
	static volatile gsize views_playlists_type_id__volatile = 0;
	if (g_once_init_enter (&views_playlists_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ViewsPlaylistsClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) views_playlists_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ViewsPlaylists), 0, (GInstanceInitFunc) views_playlists_instance_init, NULL };
		GType views_playlists_type_id;
		views_playlists_type_id = g_type_register_static (gtk_event_box_get_type (), "ViewsPlaylists", &g_define_type_info, 0);
		g_once_init_leave (&views_playlists_type_id__volatile, views_playlists_type_id);
	}
	return views_playlists_type_id__volatile;
}



